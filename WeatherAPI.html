<!DOCTYPE html>
<html>

<head>
<meta name="viewport" content="width=device-width">
<style>

body {

	margin: 0;

}
.container {

	position: absolute;
    left: calc(50% - 175px);
    top: calc(50% - 235px);
	height: 470px;
    width: 350px;
    background: orange;
    font-family: sans-serif;
    overflow: hidden;
    box-shadow: 2px 2px 20px gray;
    border-radius: 10px;

}



.desc {

	position: relative; 
    top: 10px;
    font-weight: bold;
    color: white;
    width: 100%;
    height: 20px;

}

.desc .AppName{
	left: 10px;
	position: absolute;
}

.desc .datetoday{
	top: 0;
	position: absolute;
    right: 10px;
}

.desc .AuthName {
	
    font-size: 10px;
    top: 17px;
    position: absolute;
    left: 10px;

}


.location {

	position: absolute;
    height: 45px;
    width: 45px;
    background: white;
    border-radius: 100% 100% 0 100%;
    transform: rotate(45deg) scale(0.4);
    top: 60px;
    left: -10px;

}


.location:before {

	content: "";
    height: 20px;
    width: 20px;
    background: orange;
    position: absolute;
    border-radius: 100%;
    top: 10px;
    left: 10px;

}


.waterdrop {

	height: 50px;
    width: 50px;
    background: skyblue;
    border-radius: 100% 0% 100% 100%;
    transform: rotate(-45deg) scale(.3);
    position: absolute;
    

}





.sunrise {

	position: absolute;
	height: 50px;
    width: 50px;
    background: yow;
    border-radius: 100%;
    transform: rotate(0deg) ;
    overflow: hidden;
	
}


.sunrise:before{

	position: absolute;
	content: "";
    height: 70%;
    width: 100%;
    background: yellow;
    top: 0;

}


.sunrise:after{

	position: absolute;
	content: "";
    height: 40px;
    width: 40px;
    background: orane;
    top: 10%;
    left: 5%;
    border-radius: 100%;
    border: 2px solid orange;
    border-bottom: 2px ;

}




.sunset {

	position: absolute;
	height: 50px;
    width: 50px;
    background: rd;
    border-radius: 100%;
    transform: rotate(0deg) ;
    overflow: hidden;
	
}


.sunset:before{

	position: absolute;
	content: "";
    height: 70%;
    width: 100%;
    background: red;
    top: 0;

}

.sunset:after{

	position: absolute;
	content: "";
    height: 40px;
    width: 40px;
    background: orane;
    top: 10%;
    left: 5%;
    border-radius: 100%;
    border: 2px solid orange;

}


.sunrise , .sunset {

	transform: scale(.4);

}




.tempicon {
	position: absolute;
    top: 100px;
	height: 20px;
    width: 20px;
    background: red;
    border-radius: 100%;
    transform: scale(1);
    box-shadow: 0px 0 0 5px white;

}


.tempicon:before {

	position: absolute;
    content: "";
    background: white;
    height: 50px;
    width: 15px;
    bottom: 18px;
    left: 2px;
    border-radius: 100px;
    

}


.tempicon:after {

	position: absolute;
    content: "";
    background: red;
    height: 55px;
    width: 5px;
    bottom: 7px;
    left: 7px;
	box-shadow: 5px 0px 20px black;
}



.cloudicon {

	position: absolute;
    top: 100px;
    left: 100px;
	height: 50px;
    width: 50px;
    background: gray;
    color: white;
    border-radius: 100%;
	box-shadow: -30px 0px 0px 10px grey;
    padding-top: 10px;
    font-size: 20px;
    transform: scale(.5);
    
}

.cloudicon:before {

	position: absolute;
    content: "";
    height: 50px;
    width: 140px;
    background: gray;
    border-radius: 100px;
    top: 20px;
    left: -62px;
    

}



.container .WeatherNextDays {

  position: ;
  margin-top:40px;
  white-space: nowrap;
  overflow: auto;
  rid-teplate-columns: auto auto auto auto auto auto auto;
  background: rd;
  height: 130px;
	margin-left: 10px;
    width: calc(100% - 20px);
}

.WeatherNextDays > div {

	margin-top: 10px;
	padding: px;
    height: 100px;
    width: 110px;
    background: rd;
    text-align: center;
    display: inline-block;
    border: 1px solid white;
    border-radius: 10px;
    transition: 0.2s;
    cursor: pointer;
    border-left: 15px solid hite; border-right: 15px solid whie;
    position: relative;
    
	
}

.WeatherNextDays > div img {

	height: 60px;
    width: 60px;

}

.WeatherNextDays > div > div {

	color: white;
    position: absolute;
    

}

.WeatherNextDays > div .temp {
	
    bottom: 30px;
	font-size: 15px;
    font-weight: bold;
    left: 15px;
    transform: scale(1.1);

}

.WeatherNextDays > div .clouds {
	
    bottom: 40px;
	left: 60px;
    font-size: 15px; right: -15px;
    

}

.WeatherNextDays > div .humid {
	
    bottom: 20px;
	font-size: 15px;
    right: 2px;

}


.WeatherNextDays > div .dt {
	
    bottom: 0px;
	font-size: 14px;
    color: orange;
    font-weight: bold;
    background: white;
    width: 100%;
    text-align: center;
    border-radius: 0px 0px 10px 10px;

}

.WeatherNextDays > div:hover {

	

}


.current {

	height: 60%;
    width: 96%;
    background: geen;
    position: relative;
    left: calc(50% - 48%);
    top: 10px;
    

}


.SearchBarContainer {

	position: relative;
    top: 10px;
	width: 100%;
    display: flex;
    justify-content: center;

}

.SearchBarContainer .SearchBar {

	height: 30px;
    width: 0px;
    border-radius: 100px;
    padding-left: 50px;
    background: rgba(251, 192, 147,1);
    outline: none;
    border: 1px solid orange;
    transition: 0.2s;
    font-weight: bold;
    color: white;
    

}

.SearchBarContainer .SearchBar:focus {

	width: calc(90% - 50px);
    background: rgba(251, 192, 147,.8);

}





.current #WeatherIcon {

	position: absolute;
    left: calc(50% - 25px);
    height: 100px;
    width: 100px;

}

.current .WeatherLabels {

	position: absolute;
	color: white;
    font-weight: bold;
    background: ;

}



.current .WeatherType {
	position: absolute;
	top: 125px;
}

.current .WeatherTemp {

	position: absolute;
	top: 140px;
    font-size: 50px;

}

.current .WeatherTempMin {
	position: absolute;
    top: 150px;
    left: 120px;
}

.current .WeatherTempMax {
	position: absolute;
    top: 170px;
    left: 120px;
}


.current .WeatherTempFeelsLike {

	position: absolute;
    top: 200px;
    

}

.current .WeatherTempHumidity {

	position: absolute;
    top: 220px;

}


.current .WeatherLocation {
	
    position: absolute;
    top: 70px;
    left: 30px;
    display: block;
    background: ;
    height: 30px;
    width: 100px;

}

.current .LocationGMT {

	position: absolute;
	top: 70px;
    right: 10px;

}

.current .WindSpeed {

	top: 185px;
    left: 230px;
    display: inline-block;
    white-space: nowrap;

}


.current .cloud {

	top: 125px;
    left: 270px;

}

.current .lat {
	
    position: absolute;
    top: 145px;
    left: 230px;

}

.current .lon {
	
    position: absolute;
    top: 165px;
    left: 230px;

}


.aqi {
	position: absolute;
    background: ;
    height: 30px;
    width: 100%;
    top: 250px;
    
}

.aqiBar {

	position: absolute;
	background: linear-gradient(to right,green,yellow,red);
	height: 5px;
	width: calc(85%);
    left: 35px;
    top: 10px;

}


.aqiarrow {
  position: absolute;
  height: 10px;
  width: 10px;
  border-radius: 100%;
  background: white;
  top: 7px;
  left: 35px;
  transition: 0.2s;
}

.aqidesc {
	
	position: absolute;
    top: 12px;
    color: orange;
    font-weight: bold;
    background: white;
    padding: 5px;
    left: 5px;
	border-radius: 0 10px 10px 10px;
    
}


.aqilabel {

	top: 5px;

}

.sunrisetime {

	top: 205px;
    left: 265px;

}


.sunsettime {

	top: 225px;
    left: 265px;

}


</style>
</head>

<body onload="">

<div class="container">

<div class="desc">
<div class="AppName">OpenWeatherAPI</div>
<div class="datetoday" id="datetoday">30 Sept 2024</div>
<div class="AuthName">CODERBITTU</div>
</div>

<div class="current">

<div class="SearchBarContainer">
<input type="text" class="SearchBar" id="SearchBar" value="Kolkata" onfocusout="LoadWeatherToday()">
</div>


<img src="https://openweathermap.org/img/wn/10d@2x.png" id="WeatherIcon">


<div class="WeatherType WeatherLabels" id="WeatherType">-</div>
<div class="tempicon" style="top: 170px; left: 155px ; transform: scale(.5)"></div>
<div class="WeatherTemp WeatherLabels" id="WeatherTemp">-</div>
<div class="WeatherTempMin WeatherLabels" id="WeatherTempMin">-</div>
<div class="WeatherTempMax WeatherLabels" id="WeatherTempMax">-</div>
<div class="WeatherTempFeelsLike WeatherLabels" id="WeatherTempFeelsLike">Feels Like: -</div>
<div class="WeatherTempHumidity WeatherLabels" id="WeatherTempHumidity">Humidity: -</div>
<div class="waterdrop" style="top: 205px;left: 105px;"></div>
<div class="location"></div>
<div class="WeatherLocation WeatherLabels" id="cityname">-</div>
<div class="LocationGMT WeatherLabels" id="gmt">-</div>

<div class="WindSpeed WeatherLabels" id="WindSpeed">Wind: -</div>

<div class="cloudicon" style="left: 225px; transform: scale(.25)"></div>
<div class="cloud WeatherLabels" id="cloud"> -</div>
<div class="lat WeatherLabels" id="lat">Lat: -</div>
<div class="lon WeatherLabels" id="lon">Lon: -</div>
<div class="sunrise" style="top: 190px;left: 215px;"></div>
<div class="sunset" style="top: 210px;left: 215px;"></div>
<div class="sunrisetime WeatherLabels" id="sunrise">-</div>
<div class="sunsettime WeatherLabels" id="sunset">-</div>

<div class="aqi">
<div class="aqilabel WeatherLabels">AQI</div>
<div class="aqiBar"></div>
<div class="aqiarrow" id="aqiarrow">
<div class="aqidesc" id="aqidesc">-</div>
</div>
</div>

</div>

<div class="WeatherNextDays">

<div class="nextDays">
<img src="https://openweathermap.org/img/wn/10d@2x.png" class="NxtIcon">
<div class="tempicon" style="transform: scale(.25); top: 57px ; left: -3px"></div>
<div class="temp"></div>
<div class="waterdrop" style="transform: scale(.2) rotate(-45deg); top: 47px ; right: 22px;"></div>
<div class="cloudicon" style="transform: scale(.12); top: 25px ; left: 40px;"></div>
<div class="clouds"></div>
<div class="humid"></div>
<div class="dt"></div>
</div>


<div class="nextDays">
<img src="https://openweathermap.org/img/wn/10d@2x.png" class="NxtIcon">
<div class="tempicon" style="transform: scale(.25); top: 57px ; left: -3px"></div>
<div class="temp"></div>
<div class="waterdrop" style="transform: scale(.2) rotate(-45deg); top: 47px ; right: 22px;"></div>
<div class="cloudicon" style="transform: scale(.12); top: 25px ; left: 40px;"></div>
<div class="clouds"></div>
<div class="humid"></div>
<div class="dt"></div>
</div>

<div class="nextDays">
<img src="https://openweathermap.org/img/wn/10d@2x.png" class="NxtIcon">
<div class="tempicon" style="transform: scale(.25); top: 57px ; left: -3px"></div>
<div class="temp"></div>
<div class="waterdrop" style="transform: scale(.2) rotate(-45deg); top: 47px ; right: 22px;"></div>
<div class="cloudicon" style="transform: scale(.12); top: 25px ; left: 40px;"></div>
<div class="clouds"></div>
<div class="humid"></div>
<div class="dt"></div>
</div>


<div class="nextDays">
<img src="https://openweathermap.org/img/wn/10d@2x.png" class="NxtIcon">
<div class="tempicon" style="transform: scale(.25); top: 57px ; left: -3px"></div>
<div class="temp"></div>
<div class="waterdrop" style="transform: scale(.2) rotate(-45deg); top: 47px ; right: 22px;"></div>
<div class="cloudicon" style="transform: scale(.12); top: 25px ; left: 40px;"></div>
<div class="clouds"></div>
<div class="humid"></div>
<div class="dt"></div>
</div>


<div class="nextDays">
<img src="https://openweathermap.org/img/wn/10d@2x.png" class="NxtIcon">
<div class="tempicon" style="transform: scale(.25); top: 57px ; left: -3px"></div>
<div class="temp"></div>
<div class="waterdrop" style="transform: scale(.2) rotate(-45deg); top: 47px ; right: 22px;"></div>
<div class="cloudicon" style="transform: scale(.12); top: 25px ; left: 40px;"></div>
<div class="clouds"></div>
<div class="humid"></div>
<div class="dt"></div>
</div>


<div class="nextDays">
<img src="https://openweathermap.org/img/wn/10d@2x.png" class="NxtIcon">
<div class="tempicon" style="transform: scale(.25); top: 57px ; left: -3px"></div>
<div class="temp"></div>
<div class="waterdrop" style="transform: scale(.2) rotate(-45deg); top: 47px ; right: 22px;"></div>
<div class="cloudicon" style="transform: scale(.12); top: 25px ; left: 40px;"></div>
<div class="clouds"></div>
<div class="humid"></div>
<div class="dt"></div>
</div>


</div>

</div>


<script>



var WeatherToday_Object;
var AQI_Object;
var NextFive_Object;



var lat = 0;
var long = 0;
var tzone = 0;



var MonthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];



document.getElementById("SearchBar").addEventListener("keypress",function(evt){

	if(evt.key==="Enter"){
    	LoadWeatherToday();
    }

});



Startup();

function Startup(){

	var time = new Date()
    var date = time.getDate();
    var month = time.getMonth();
    var year = time.getFullYear();

	var dateElement = document.getElementById("datetoday");
    
    dateElement.innerHTML = date+" "+MonthNames[month]+" "+year;
    
    setTimeout(LoadWeatherToday,100);
	

}


function LoadWeatherToday(){

    var cityName = document.getElementById("SearchBar").value;
	
    cityName = cityName.replaceAll(" ","+");
    
    var URL = "https://api.openweathermap.org/data/2.5/weather?q="+cityName+"&appid=ac7b86549ca9217c2e522d87537c2fcb";
	
    var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      WeatherToday_Object = JSON.parse(this.responseText);
      setTimeout(SetUpTodayData,10);
    }
  };
  xhttp.open("GET", URL, true);
  xhttp.send();
  
  
  setTimeout(LoadPollutionInfo,800);
  setTimeout(LoadNextDaysInfo,300);

}


function SetUpTodayData(){
	
    lat = WeatherToday_Object.coord.lat;
    lon = WeatherToday_Object.coord.lon;
    tzone = WeatherToday_Object.timezone;
    
    var weatherMain = WeatherToday_Object.weather[0].main;
    var weatherDesc = WeatherToday_Object.weather[0].description;
    var weatherIcon = WeatherToday_Object.weather[0].icon;
    
    
    var weatherTemp = parseInt(WeatherToday_Object.main.temp - 275);
    var weatherTempMin = parseInt(WeatherToday_Object.main.temp_min - 275);
    var weatherTempMax = parseInt(WeatherToday_Object.main.temp_max - 275);
    var feelsLike = parseInt(WeatherToday_Object.main.feels_like - 275);
    var humidity  = WeatherToday_Object.main.humidity;
    
    
    var windSpeed = parseInt(((WeatherToday_Object.wind.speed) * 3600)/1000);
    
    
    var cloudPerc = WeatherToday_Object.clouds.all;
    
    
    var sunriseTime  = ConvertUnixTime(WeatherToday_Object.sys.sunrise,tzone);
    var sunsetTime  = ConvertUnixTime(WeatherToday_Object.sys.sunset,tzone);
    var countryName = WeatherToday_Object.sys.country;
    
    var location = WeatherToday_Object.name;
    
    
    
    document.getElementById("WeatherIcon").src = "https://openweathermap.org/img/wn/"+weatherIcon+"@2x.png";
    
    document.getElementById("WeatherType").innerHTML = weatherMain+", "+weatherDesc;
    
    document.getElementById("WeatherTemp").innerHTML = weatherTemp+"°C";
    document.getElementById("WeatherTempMin").innerHTML = weatherTempMin+"°C";
    document.getElementById("WeatherTempMax").innerHTML = weatherTempMax+"°C";
    document.getElementById("WeatherTempFeelsLike").innerHTML = "Feels like "+feelsLike+"°C";
    document.getElementById("WeatherTempHumidity").innerHTML = "Humidity: "+humidity+"%";
    
    document.getElementById("cloud").innerHTML = cloudPerc+"%";
    
    document.getElementById("lat").innerHTML = "Lat "+lat;
    document.getElementById("lon").innerHTML = "Lon "+lon;
    
    document.getElementById("WindSpeed").innerHTML = "Wind: "+windSpeed+"KM/h";
    
    document.getElementById("sunrise").innerHTML = sunriseTime.getHours() +":"+AddZero(sunriseTime.getMinutes());
    document.getElementById("sunset").innerHTML = sunsetTime.getHours() +":"+AddZero(sunsetTime.getMinutes());
    
    document.getElementById("cityname").innerHTML =  location+","+countryName;
    
    document.getElementById("gmt").innerHTML = "GMT "+GetTimeZoneString(tzone);
   
    
}



function LoadNextDaysInfo(){

	var URL = "https://api.openweathermap.org/data/2.5/forecast?lat="+lat+"&lon="+lon+"&appid=ac7b86549ca9217c2e522d87537c2fcb";
    
    var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      NextFive_Object = JSON.parse(this.responseText);
      setTimeout(SetNextDayInfo,50);
    }
  };
  xhttp.open("GET", URL, true);
  xhttp.send();

	

}



function SetNextDayInfo(){

	var NextDayElements = document.getElementsByClassName("nextDays");
    var NextTempElements = document.getElementsByClassName("temp");
    var NextIcons = document.getElementsByClassName("NxtIcon");
    var NextHumid = document.getElementsByClassName("humid");
    var NextClouds = document.getElementsByClassName("clouds");
    var NextDates = document.getElementsByClassName("dt");
    
    var prevDate = "";
var y = 0;
for(x=0;x<NextFive_Object.list.length;x++){
    
    var curDate = NextFive_Object.list[x].dt_txt.slice(1,10);
    if(!prevDate.includes(curDate)){
    
    	let Date = NextFive_Object.list[x].dt_txt.split(" ")[0].split("-")[2];
    	let Month = NextFive_Object.list[x].dt_txt.split(" ")[0].split("-")[1] -1;
        
        let temp = (NextFive_Object.list[x].main.temp - 275);
        let humid =(NextFive_Object.list[x].main.humidity);
        let clouds = (NextFive_Object.list[x].clouds.all);
        
        NextDates[y].innerHTML = Date+" "+MonthNames[Month];
        NextIcons[y].src = "https://openweathermap.org/img/wn/"+NextFive_Object.list[x].weather[0].icon+"@2x.png";
        NextTempElements[y].innerHTML = parseInt(temp)+"°C";
        NextHumid[y].innerHTML = humid+"%";
        NextClouds[y].innerHTML = clouds+"%";
        
        y++;
        prevDate = curDate;
    }
    
}


}


// AQI 35px - 315px


function LoadPollutionInfo(){

	var URL = "http://api.openweathermap.org/data/2.5/air_pollution?lat="+lat+"&lon="+lon+"&appid=ac7b86549ca9217c2e522d87537c2fcb";
	
    var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      AQI_Object = JSON.parse(this.responseText);
      setTimeout(SetAqiMeter,80);
    }
  };
  xhttp.open("GET", URL, true);
  xhttp.send();
  
  

}


function SetAqiMeter(){


 	var indexObj = {
    
    		1: "Good",
        	2: "Fair",
        	3: "Moderate",
        	4: "Poor",
        	5: "Very poor",
    
    	};

    var value = AQI_Object.list[0].main.aqi;
   
	
    var aqiBar = document.getElementsByClassName("aqiBar")[0];
    var aqiTip = document.getElementById("aqidesc");
    var aqiArrow = document.getElementById("aqiarrow"); 
    
    var aqiPos = map(value,0,5,35,315);
    aqiTip.innerHTML = indexObj[value];
    aqiArrow.style.left = aqiPos+"px";
    
    var TipWidth = aqiTip.offsetWidth;
    var BarWidth = aqiBar.offsetWidth;
    var Arrow_left = aqiPos ;
    
    
    
    if( (Arrow_left + TipWidth) >= (BarWidth) ){
    	aqiTip.style.left = "-"+TipWidth+"px";
        aqiTip.style.borderRadius = "10px 0px 10px 10px";
    }else{
    	aqiTip.style.left = "5px";
        aqiTip.style.borderRadius = "0px 10px 10px 10px";
    }
    
    
}

function map(x, in_min, in_max, out_min, out_max) {
      return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
}


function ConvertUnixTime(unixtimestamp,timezone){
	var d = new Date(1970,0,1,0,0,0);
	d.setSeconds(timezone);
    	d.setSeconds(unixtimestamp);
        return d;
}


function GetTimeZoneString(tZone){

	var hours = tZone / (3600); 
	var min = (tZone - (parseInt(hours)*3600)) / 60;

	var TZoneString = "";

	if(hours>0){
		TZoneString = "+"+parseInt(hours) + ":"+AddZero(min);
	}
	else if(hours<=0){
		TZoneString = parseInt(hours) + ":"+AddZero(min);
	}
    
    return TZoneString;
	

}


function AddZero(i){

	if(i<10){
    	return "0"+i;
    }else{
    	return i;
    }

}



</script>

</body>

</html>
